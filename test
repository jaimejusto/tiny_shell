00000000  23 21 2f 62 69 6e 2f 62  61 73 68 0a 0a 65 63 68  |#!/bin/bash..ech|
00000010  6f 20 22 50 52 45 2d 53  43 52 49 50 54 20 49 4e  |o "PRE-SCRIPT IN|
00000020  46 4f 22 0a 65 63 68 6f  20 22 20 20 47 72 61 64  |FO".echo "  Grad|
00000030  69 6e 67 20 53 63 72 69  70 74 20 50 49 44 3a 20  |ing Script PID: |
00000040  24 24 22 0a 65 63 68 6f  20 27 20 20 4e 6f 74 65  |$$".echo '  Note|
00000050  3a 20 79 6f 75 72 20 73  6d 61 6c 6c 73 68 20 77  |: your smallsh w|
00000060  69 6c 6c 20 72 65 70 6f  72 74 20 61 20 64 69 66  |ill report a dif|
00000070  66 65 72 65 6e 74 20 50  49 44 20 77 68 65 6e 20  |ferent PID when |
00000080  65 76 61 6c 75 61 74 69  6e 67 20 24 24 27 0a 0a  |evaluating $$'..|
00000090  2e 2f 73 6d 61 6c 6c 73  68 20 3c 3c 27 5f 5f 5f  |./smallsh <<'___|
000000a0  45 4f 46 5f 5f 5f 27 0a  65 63 68 6f 20 42 45 47  |EOF___'.echo BEG|
000000b0  49 4e 4e 49 4e 47 20 54  45 53 54 20 53 43 52 49  |INNING TEST SCRI|
000000c0  50 54 0a 65 63 68 6f 0a  65 63 68 6f 20 2d 2d 2d  |PT.echo.echo ---|
000000d0  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  |----------------|
000000e0  2d 0a 65 63 68 6f 20 55  73 69 6e 67 20 63 6f 6d  |-.echo Using com|
000000f0  6d 65 6e 74 20 28 35 20  70 6f 69 6e 74 73 20 69  |ment (5 points i|
00000100  66 20 6f 6e 6c 79 20 6e  65 78 74 20 70 72 6f 6d  |f only next prom|
00000110  70 74 20 69 73 20 64 69  73 70 6c 61 79 65 64 20  |pt is displayed |
00000120  6e 65 78 74 29 0a 23 54  48 49 53 20 43 4f 4d 4d  |next).#THIS COMM|
00000130  45 4e 54 20 53 48 4f 55  4c 44 20 44 4f 20 4e 4f  |ENT SHOULD DO NO|
00000140  54 48 49 4e 47 0a 65 63  68 6f 0a 65 63 68 6f 0a  |THING.echo.echo.|
00000150  65 63 68 6f 20 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  |echo -----------|
00000160  2d 2d 2d 2d 2d 2d 2d 2d  2d 0a 65 63 68 6f 20 6c  |---------.echo l|
00000170  73 20 28 31 30 20 70 6f  69 6e 74 73 20 66 6f 72  |s (10 points for|
00000180  20 72 65 74 75 72 6e 69  6e 67 20 64 69 72 20 63  | returning dir c|
00000190  6f 6e 74 65 6e 74 73 29  0a 6c 73 0a 65 63 68 6f  |ontents).ls.echo|
000001a0  0a 65 63 68 6f 0a 65 63  68 6f 20 2d 2d 2d 2d 2d  |.echo.echo -----|
000001b0  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 0a  |---------------.|
000001c0  65 63 68 6f 20 6c 73 20  6f 75 74 20 6a 75 6e 6b  |echo ls out junk|
000001d0  0a 6c 73 20 3e 20 6a 75  6e 6b 0a 65 63 68 6f 0a  |.ls > junk.echo.|
000001e0  65 63 68 6f 0a 65 63 68  6f 20 2d 2d 2d 2d 2d 2d  |echo.echo ------|
000001f0  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 0a 65  |--------------.e|
00000200  63 68 6f 20 63 61 74 20  6a 75 6e 6b 20 28 31 35  |cho cat junk (15|
00000210  20 70 6f 69 6e 74 73 20  66 6f 72 20 63 6f 72 72  | points for corr|
00000220  65 63 74 6c 79 20 72 65  74 75 72 6e 69 6e 67 20  |ectly returning |
00000230  63 6f 6e 74 65 6e 74 73  20 6f 66 20 6a 75 6e 6b  |contents of junk|
00000240  29 0a 63 61 74 20 6a 75  6e 6b 0a 65 63 68 6f 0a  |).cat junk.echo.|
00000250  65 63 68 6f 0a 65 63 68  6f 20 2d 2d 2d 2d 2d 2d  |echo.echo ------|
00000260  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 0a 65  |--------------.e|
00000270  63 68 6f 20 77 63 20 69  6e 20 6a 75 6e 6b 20 28  |cho wc in junk (|
00000280  31 35 20 70 6f 69 6e 74  73 20 66 6f 72 20 72 65  |15 points for re|
00000290  74 75 72 6e 69 6e 67 20  63 6f 72 72 65 63 74 20  |turning correct |
000002a0  6e 75 6d 62 65 72 73 20  66 72 6f 6d 20 77 63 29  |numbers from wc)|
000002b0  0a 77 63 20 3c 20 6a 75  6e 6b 0a 65 63 68 6f 0a  |.wc < junk.echo.|
000002c0  65 63 68 6f 0a 65 63 68  6f 20 2d 2d 2d 2d 2d 2d  |echo.echo ------|
000002d0  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 0a 65  |--------------.e|
000002e0  63 68 6f 20 77 63 20 69  6e 20 6a 75 6e 6b 20 6f  |cho wc in junk o|
000002f0  75 74 20 6a 75 6e 6b 32  3b 20 63 61 74 20 6a 75  |ut junk2; cat ju|
00000300  6e 6b 32 20 28 31 30 20  70 6f 69 6e 74 73 20 66  |nk2 (10 points f|
00000310  6f 72 20 72 65 74 75 72  6e 69 6e 67 20 63 6f 72  |or returning cor|
00000320  72 65 63 74 20 6e 75 6d  62 65 72 73 20 66 72 6f  |rect numbers fro|
00000330  6d 20 77 63 29 0a 77 63  20 3c 20 6a 75 6e 6b 20  |m wc).wc < junk |
00000340  3e 20 6a 75 6e 6b 32 0a  63 61 74 20 6a 75 6e 6b  |> junk2.cat junk|
00000350  32 0a 65 63 68 6f 0a 65  63 68 6f 0a 65 63 68 6f  |2.echo.echo.echo|
00000360  20 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  | ---------------|
00000370  2d 2d 2d 2d 2d 0a 65 63  68 6f 20 74 65 73 74 20  |-----.echo test |
00000380  2d 66 20 62 61 64 66 69  6c 65 20 28 31 30 20 70  |-f badfile (10 p|
00000390  6f 69 6e 74 73 20 66 6f  72 20 72 65 74 75 72 6e  |oints for return|
000003a0  69 6e 67 20 65 72 72 6f  72 20 76 61 6c 75 65 20  |ing error value |
000003b0  6f 66 20 31 2c 20 6e 6f  74 65 20 65 78 74 72 61  |of 1, note extra|
000003c0  6e 65 6f 75 73 20 26 29  0a 74 65 73 74 20 2d 66  |neous &).test -f|
000003d0  20 62 61 64 66 69 6c 65  0a 73 74 61 74 75 73 20  | badfile.status |
000003e0  26 0a 65 63 68 6f 0a 65  63 68 6f 0a 65 63 68 6f  |&.echo.echo.echo|
000003f0  20 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  | ---------------|
00000400  2d 2d 2d 2d 2d 0a 65 63  68 6f 20 77 63 20 69 6e  |-----.echo wc in|
00000410  20 62 61 64 66 69 6c 65  20 28 31 30 20 70 6f 69  | badfile (10 poi|
00000420  6e 74 73 20 66 6f 72 20  72 65 74 75 72 6e 69 6e  |nts for returnin|
00000430  67 20 74 65 78 74 20 65  72 72 6f 72 29 0a 77 63  |g text error).wc|
00000440  20 3c 20 62 61 64 66 69  6c 65 0a 65 63 68 6f 0a  | < badfile.echo.|
00000450  65 63 68 6f 0a 65 63 68  6f 20 2d 2d 2d 2d 2d 2d  |echo.echo ------|
00000460  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 0a 65  |--------------.e|
00000470  63 68 6f 20 62 61 64 66  69 6c 65 20 28 31 30 20  |cho badfile (10 |
00000480  70 6f 69 6e 74 73 20 66  6f 72 20 72 65 74 75 72  |points for retur|
00000490  6e 69 6e 67 20 74 65 78  74 20 65 72 72 6f 72 29  |ning text error)|
000004a0  0a 62 61 64 66 69 6c 65  0a 65 63 68 6f 0a 65 63  |.badfile.echo.ec|
000004b0  68 6f 0a 65 63 68 6f 20  2d 2d 2d 2d 2d 2d 2d 2d  |ho.echo --------|
000004c0  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 0a 65 63 68  |------------.ech|
000004d0  6f 20 73 6c 65 65 70 20  31 30 30 20 62 61 63 6b  |o sleep 100 back|
000004e0  67 72 6f 75 6e 64 20 28  31 30 20 70 6f 69 6e 74  |ground (10 point|
000004f0  73 20 66 6f 72 20 72 65  74 75 72 6e 69 6e 67 20  |s for returning |
00000500  70 72 6f 63 65 73 73 20  49 44 20 6f 66 20 73 6c  |process ID of sl|
00000510  65 65 70 65 72 29 0a 73  6c 65 65 70 20 31 30 30  |eeper).sleep 100|
00000520  20 26 0a 65 63 68 6f 0a  65 63 68 6f 0a 65 63 68  | &.echo.echo.ech|
00000530  6f 20 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  |o --------------|
00000540  2d 2d 2d 2d 2d 2d 0a 65  63 68 6f 20 70 6b 69 6c  |------.echo pkil|
00000550  6c 20 2d 73 69 67 6e 61  6c 20 53 49 47 54 45 52  |l -signal SIGTER|
00000560  4d 20 73 6c 65 65 70 20  28 31 30 20 70 6f 69 6e  |M sleep (10 poin|
00000570  74 73 20 66 6f 72 20 70  69 64 20 6f 66 20 6b 69  |ts for pid of ki|
00000580  6c 6c 65 64 20 70 72 6f  63 65 73 73 2c 20 31 30  |lled process, 10|
00000590  20 70 6f 69 6e 74 73 20  66 6f 72 20 73 69 67 6e  | points for sign|
000005a0  61 6c 29 0a 65 63 68 6f  20 28 49 67 6e 6f 72 65  |al).echo (Ignore|
000005b0  20 6d 65 73 73 61 67 65  20 61 62 6f 75 74 20 4f  | message about O|
000005c0  70 65 72 61 74 69 6f 6e  20 4e 6f 74 20 50 65 72  |peration Not Per|
000005d0  6d 69 74 74 65 64 29 0a  70 6b 69 6c 6c 20 73 6c  |mitted).pkill sl|
000005e0  65 65 70 0a 65 63 68 6f  0a 65 63 68 6f 0a 65 63  |eep.echo.echo.ec|
000005f0  68 6f 20 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  |ho -------------|
00000600  2d 2d 2d 2d 2d 2d 2d 0a  65 63 68 6f 20 73 6c 65  |-------.echo sle|
00000610  65 70 20 31 20 62 61 63  6b 67 72 6f 75 6e 64 20  |ep 1 background |
00000620  28 31 30 20 70 74 73 20  66 6f 72 20 70 69 64 20  |(10 pts for pid |
00000630  6f 66 20 62 67 20 70 73  20 77 68 65 6e 20 64 6f  |of bg ps when do|
00000640  6e 65 2c 20 31 30 20 66  6f 72 20 65 78 69 74 20  |ne, 10 for exit |
00000650  76 61 6c 75 65 29 0a 73  6c 65 65 70 20 31 20 26  |value).sleep 1 &|
00000660  0a 73 6c 65 65 70 20 31  0a 65 63 68 6f 0a 65 63  |.sleep 1.echo.ec|
00000670  68 6f 0a 65 63 68 6f 20  2d 2d 2d 2d 2d 2d 2d 2d  |ho.echo --------|
00000680  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 0a 65 63 68  |------------.ech|
00000690  6f 20 70 77 64 0a 70 77  64 0a 65 63 68 6f 0a 65  |o pwd.pwd.echo.e|
000006a0  63 68 6f 0a 65 63 68 6f  20 2d 2d 2d 2d 2d 2d 2d  |cho.echo -------|
000006b0  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 0a 65 63  |-------------.ec|
000006c0  68 6f 20 63 64 0a 63 64  0a 65 63 68 6f 0a 65 63  |ho cd.cd.echo.ec|
000006d0  68 6f 0a 65 63 68 6f 20  2d 2d 2d 2d 2d 2d 2d 2d  |ho.echo --------|
000006e0  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 0a 65 63 68  |------------.ech|
000006f0  6f 20 70 77 64 20 28 31  30 20 70 6f 69 6e 74 73  |o pwd (10 points|
00000700  20 66 6f 72 20 62 65 69  6e 67 20 69 6e 20 74 68  | for being in th|
00000710  65 20 48 4f 4d 45 20 64  69 72 29 0a 70 77 64 0a  |e HOME dir).pwd.|
00000720  65 63 68 6f 0a 65 63 68  6f 0a 65 63 68 6f 20 2d  |echo.echo.echo -|
00000730  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  |----------------|
00000740  2d 2d 2d 0a 65 63 68 6f  20 6d 6b 64 69 72 20 74  |---.echo mkdir t|
00000750  65 73 74 64 69 72 24 24  0a 6d 6b 64 69 72 20 74  |estdir$$.mkdir t|
00000760  65 73 74 64 69 72 24 24  0a 65 63 68 6f 0a 65 63  |estdir$$.echo.ec|
00000770  68 6f 0a 65 63 68 6f 20  2d 2d 2d 2d 2d 2d 2d 2d  |ho.echo --------|
00000780  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 0a 65 63 68  |------------.ech|
00000790  6f 20 63 64 20 74 65 73  74 64 69 72 24 24 0a 63  |o cd testdir$$.c|
000007a0  64 20 74 65 73 74 64 69  72 24 24 0a 65 63 68 6f  |d testdir$$.echo|
000007b0  0a 65 63 68 6f 0a 65 63  68 6f 20 2d 2d 2d 2d 2d  |.echo.echo -----|
000007c0  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 0a  |---------------.|
000007d0  65 63 68 6f 20 70 77 64  20 28 35 20 70 6f 69 6e  |echo pwd (5 poin|
000007e0  74 73 20 66 6f 72 20 62  65 69 6e 67 20 69 6e 20  |ts for being in |
000007f0  74 68 65 20 6e 65 77 6c  79 20 63 72 65 61 74 65  |the newly create|
00000800  64 20 64 69 72 29 0a 70  77 64 0a 65 63 68 6f 20  |d dir).pwd.echo |
00000810  2d 2d 2d 2d 2d 2d 2d 2d  2d 2d 2d 2d 2d 2d 2d 2d  |----------------|
00000820  2d 2d 2d 2d 0a 65 63 68  6f 20 54 65 73 74 69 6e  |----.echo Testin|
00000830  67 20 66 6f 72 65 67 72  6f 75 6e 64 2d 6f 6e 6c  |g foreground-onl|
00000840  79 20 6d 6f 64 65 20 28  32 30 20 70 6f 69 6e 74  |y mode (20 point|
00000850  73 20 66 6f 72 20 65 6e  74 72 79 20 26 20 65 78  |s for entry & ex|
00000860  69 74 20 74 65 78 74 20  41 4e 44 20 7e 35 20 73  |it text AND ~5 s|
00000870  65 63 6f 6e 64 73 20 62  65 74 77 65 65 6e 20 74  |econds between t|
00000880  69 6d 65 73 29 0a 6b 69  6c 6c 20 2d 53 49 47 54  |imes).kill -SIGT|
00000890  53 54 50 20 24 24 0a 64  61 74 65 0a 73 6c 65 65  |STP $$.date.slee|
000008a0  70 20 35 20 26 0a 64 61  74 65 0a 6b 69 6c 6c 20  |p 5 &.date.kill |
000008b0  2d 53 49 47 54 53 54 50  20 24 24 0a 65 78 69 74  |-SIGTSTP $$.exit|
000008c0  0a 5f 5f 5f 45 4f 46 5f  5f 5f 0a                 |.___EOF___.|
000008cb
